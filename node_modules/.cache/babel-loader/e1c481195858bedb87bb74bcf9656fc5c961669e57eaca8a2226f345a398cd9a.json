{"ast":null,"code":"// CartPage.js\nimport React,{useMemo}from'react';import'./CartPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CartPage=_ref=>{let{cartItems,setCartItems,goToCheckout,goToMenu,updateItemQuantity}=_ref;// removeFromCart\nconsole.log(cartItems);// console.log(cartItems[0].price)\n// helper function to help calculate price of extras and options\nconst calculateExtrasPrice=selectedExtras=>{// console.log('calculateExtrasPrice is here', selectedExtras)\nreturn selectedExtras.reduce((total,extra)=>{// include option price if exist\n// console.log('calculateExtrasPrice is here >> extra', extra)\nconst optionPrice=extra.option?extra.option.price:0;// console.log('calculateExtrasPrice is here >> optionPrice', optionPrice)\n// console.log(total, optionPrice)\nreturn total+optionPrice;},0);};// calculate subtotal for single item including extra\nconst calculateItemSubtotal=item=>{// console.log('calculateItemSubtotal is here', item)\nconst extrasPrice=calculateExtrasPrice(item.selectedExtras||[]);// console.log('calculateItemSubtotal is here >>> extrasPrice', extrasPrice)\nconst itemSubtotal=(item.price+extrasPrice)*item.quantity;// console.log('calculateItemSubtotal is here >>> itemSubtotal', itemSubtotal)\nreturn itemSubtotal.toFixed(2);// toFixed, to 2 decimal places\n};// const calculateTotal = () => {\n//   return cartItems.reduce((total, item) => total + parseFloat(calculateItemSubtotal(item)),0 ).toFixed(2);\n// }\n// console.log('calculate total is here',calculateTotal);\n// console.log('calculate total is here',cartItems);\n//////////////////\nconst calculateTotal=cartItems=>{return cartItems.reduce((total,item)=>{//start with base price times the qty of item\nlet itemTotal=item.price*item.quantity;console.log('item is here',item);console.log('itemTotal is here',itemTotal);// add price of selected variant options\nif(item.selectedExtras&&item.selectedExtras.length>0){const variantsTotal=item.selectedExtras.reduce((variantsSum,variant)=>{// calculate total price of selected option within variant\nconsole.log('variant is here',variant);const optionTotal=variant.options.reduce((optionSum,option)=>{console.log('option is here',option);console.log('option.selected is here',option.selected);console.log('optionSum is here',optionSum);console.log('option.price is here',option.price);return variant.options.length>0?optionSum+option.price:optionSum;},0);console.log('variantsSum is here',variantsSum);console.log('optionTotal is here',optionTotal);return variantsSum+optionTotal;},0);console.log('itemTotal is here',itemTotal);console.log('variantsTotal is here',variantsTotal);itemTotal+=variantsTotal;}console.log('total is here',total);console.log('itemTotal is here',itemTotal);return total+itemTotal;},0);};const total=calculateTotal(cartItems);const handleIncrease=itemID=>{console.log('handle increase is here',itemID);const item=cartItems.find(key=>key.uniqueKeyForCart===itemID);console.log('handle increase item is here',item);updateItemQuantity(itemID,item.quantity+1);console.log(\"did qty plus 1?\",item);};const handleDecrease=uniqueKey=>{console.log('itemID is here when decreasing',uniqueKey);// Adjust quantities in cartItems\nsetCartItems(currentItems=>currentItems.reduce((acc,item)=>{if(item.uniqueKeyForCart===uniqueKey){if(item.quantity>1){// Decrease the quantity\nacc.push({...item,quantity:item.quantity-1});}// If quantity is 1, do not add the item back to acc, effectively removing it\n}else{// Add other items as is\nacc.push(item);}return acc;},[]));};// Function to calculate subtotal\n// const calculateSubtotal = () => {\n//   return cartItems.reduce((total, item) => total + parseFloat(item.price), 0);\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-items\",children:cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageName,alt:item.name,className:\"item-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price per item: $\",item.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity: \",item.quantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Extras cost: $\",calculateExtrasPrice(item.selectedExtras||[]).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal: $\",calculateItemSubtotal(item)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-control\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDecrease(item.uniqueKeyForCart,Math.max(1,item.quantity-1)),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleIncrease(item.uniqueKeyForCart,item.quantity+1),children:\"+\"})]})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal: $\",total]}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:goToCheckout,children:\"Proceed to Checkout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:goToMenu,children:\"Back to Menu\"})]})]});};export default CartPage;","map":{"version":3,"names":["React","useMemo","jsx","_jsx","jsxs","_jsxs","CartPage","_ref","cartItems","setCartItems","goToCheckout","goToMenu","updateItemQuantity","console","log","calculateExtrasPrice","selectedExtras","reduce","total","extra","optionPrice","option","price","calculateItemSubtotal","item","extrasPrice","itemSubtotal","quantity","toFixed","calculateTotal","itemTotal","length","variantsTotal","variantsSum","variant","optionTotal","options","optionSum","selected","handleIncrease","itemID","find","key","uniqueKeyForCart","handleDecrease","uniqueKey","currentItems","acc","push","className","children","map","index","src","imageName","alt","name","onClick","Math","max"],"sources":["/Users/martintirtawisata/my-react-app-pos/src/CartPage.js"],"sourcesContent":["// CartPage.js\nimport React, {useMemo} from 'react';\nimport './CartPage.css';\n\nconst CartPage = ({ cartItems, setCartItems, goToCheckout, goToMenu, updateItemQuantity }) => {\n  // removeFromCart\n\n  console.log(cartItems)\n  // console.log(cartItems[0].price)\n\n  // helper function to help calculate price of extras and options\n  const calculateExtrasPrice = (selectedExtras) => {\n    // console.log('calculateExtrasPrice is here', selectedExtras)\n    return selectedExtras.reduce((total, extra) => {\n      // include option price if exist\n      // console.log('calculateExtrasPrice is here >> extra', extra)\n      const optionPrice = extra.option ? extra.option.price : 0;\n      // console.log('calculateExtrasPrice is here >> optionPrice', optionPrice)\n      // console.log(total, optionPrice)\n      return total + optionPrice;\n      \n    }, 0);\n  };\n\n  // calculate subtotal for single item including extra\n  const calculateItemSubtotal = (item) => {\n    // console.log('calculateItemSubtotal is here', item)\n    const extrasPrice = calculateExtrasPrice(item.selectedExtras || []);\n    // console.log('calculateItemSubtotal is here >>> extrasPrice', extrasPrice)\n    const itemSubtotal = (item.price + extrasPrice) * item.quantity;\n    // console.log('calculateItemSubtotal is here >>> itemSubtotal', itemSubtotal)\n    return itemSubtotal.toFixed(2);\n    // toFixed, to 2 decimal places\n  }\n\n  // const calculateTotal = () => {\n  //   return cartItems.reduce((total, item) => total + parseFloat(calculateItemSubtotal(item)),0 ).toFixed(2);\n  // }\n\n  // console.log('calculate total is here',calculateTotal);\n  // console.log('calculate total is here',cartItems);\n\n  //////////////////\n  const calculateTotal = (cartItems) => {\n    return cartItems.reduce((total, item) => {\n      //start with base price times the qty of item\n      let itemTotal = item.price * item.quantity\n\n      console.log('item is here', item);\n\n      console.log('itemTotal is here', itemTotal);\n\n      // add price of selected variant options\n      if (item.selectedExtras && item.selectedExtras.length > 0) {\n        const variantsTotal = item.selectedExtras.reduce((variantsSum, variant) => {\n          // calculate total price of selected option within variant\n\n          console.log('variant is here', variant);\n\n          const optionTotal = variant.options.reduce((optionSum, option) => {\n\n            console.log('option is here', option);\n            console.log('option.selected is here', option.selected);\n            console.log('optionSum is here', optionSum);\n            console.log('option.price is here', option.price);\n\n            return variant.options.length > 0 ? optionSum + option.price : optionSum; \n          }, 0);\n          \n          console.log('variantsSum is here',variantsSum)\n          console.log('optionTotal is here',optionTotal)\n        \n          return variantsSum + optionTotal;\n        }, 0);\n\n        console.log('itemTotal is here',itemTotal)\n        console.log('variantsTotal is here',variantsTotal)\n\n        itemTotal += variantsTotal;\n      }\n\n      console.log('total is here',total)\n      console.log('itemTotal is here',itemTotal)\n\n      return total + itemTotal;\n    }, 0);\n  };\n\n  const total = calculateTotal(cartItems);\n\n\n\n  const handleIncrease = (itemID) => {\n    console.log('handle increase is here',itemID)\n    const item = cartItems.find(key => key.uniqueKeyForCart === itemID);\n    console.log('handle increase item is here', item)\n    updateItemQuantity(itemID, item.quantity + 1);\n    console.log(\"did qty plus 1?\", item)\n  }\n\n  const handleDecrease = (uniqueKey) => {\n    console.log('itemID is here when decreasing',uniqueKey)\n    // Adjust quantities in cartItems\n    setCartItems(currentItems =>\n      currentItems.reduce((acc, item) => {\n        if (item.uniqueKeyForCart === uniqueKey) {\n          if (item.quantity > 1) {\n            // Decrease the quantity\n            acc.push({ ...item, quantity: item.quantity - 1 });\n          }\n          // If quantity is 1, do not add the item back to acc, effectively removing it\n        } else {\n          // Add other items as is\n          acc.push(item);\n        }\n        return acc;\n      }, [])\n    );\n  };\n \n  \n\n\n  // Function to calculate subtotal\n  // const calculateSubtotal = () => {\n  //   return cartItems.reduce((total, item) => total + parseFloat(item.price), 0);\n  // };\n\n  return (\n    <div className=\"cart-container\">\n      <h1>Shopping Cart</h1>\n      <div className=\"cart-items\">\n        {cartItems.map((item, index) => (\n          \n          <div key={index} className=\"cart-item\">\n            <img src={item.imageName} alt={item.name} className=\"item-image\" />\n\n            <div className=\"item-details\">\n              <h3>{item.name}</h3>  \n              <p>Price per item: ${item.price.toFixed(2)}</p>\n              <p>Quantity: {item.quantity}</p>\n              <p>Extras cost: ${calculateExtrasPrice(item.selectedExtras || []).toFixed(2)}</p>\n              <p>Subtotal: ${calculateItemSubtotal(item)}</p>\n\n              {/* {item.selectedExtras.length > 0 && (\n                <div>\n                  <h4>Variants</h4>\n                  {item.selectedExtras.map(item => (\n                    item.options.map(extra => (\n                      <p key={extra.id}> {extra.name}: +${extra.price} </p>\n                    ))\n                  ))}\n                </div>\n              )} */}\n\n              <div className=\"quantity-control\">\n                <h3>{item.name}</h3>    \n                <button onClick={() => handleDecrease(item.uniqueKeyForCart, Math.max(1, item.quantity - 1))}>-</button>\n                <span>{item.quantity}</span>\n                <button onClick={() => handleIncrease(item.uniqueKeyForCart, item.quantity + 1)}>+</button>\n              </div>\n          \n            </div>\n\n          </div>\n\n        ))}\n      </div>\n      <div>\n        <p>Subtotal: ${total}</p> {/* Display subtotal */}\n        <button onClick={goToCheckout}>Proceed to Checkout</button>\n        <button onClick={goToMenu}>Back to Menu</button>\n      </div>\n    </div>\n  );\n};\n\nexport default CartPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}